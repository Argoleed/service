# Курсовой проект
## Сервис оценки заведений
***
## Ссылка на сайт: http://f0767273.xsph.ru
***
#### 1. Пользовательский интерфейс - https://www.figma.com/community/file/1196837811680268073
***
***
#### 2. Структура базы данных
***
#### users

| Название | Тип данных    | Описание                                          |
|----------|---------------|---------------------------------------------------|
| id       | int           | Ключевое поле                                     |
| login    | varchar(32)   | Логин                                             |
| type     | varchar(8)    | Тип пользователя (owner или visitor)              |
| hash     | text          | Хэш пароля и соли                                 |
| salt     | varbinary(16) | Соль пользователя                                 |

***
#### points
| Название | Тип данных    | Описание                                          |
|----------|---------------|---------------------------------------------------|
| id       | int           | Ключевое поле                                     |
| y        | double        | Вертикальная координата                           |
| x        | double        | Горизонтальная координата                         |
| owner    | varchar(32)   | Никнейм владельца точки                           |

***
#### information

| Название    | Тип данных    | Описание                                          |
|-------------|---------------|---------------------------------------------------|
| id          | int           | id точки                                          |
| name        | text          | Название                                          |
| description | text          | Описание                                          |
| rating      | float         | Рейтинг                                           |
| reviews     | int           | Количество отзывов                                |

***
#### reviews

| Название    | Тип данных    | Описание                                          |
|-------------|---------------|---------------------------------------------------|
| id          | int           | id точки                                          |
| username    | varchar(32)   | Никнейм посетителя                                |
| rating      | int           | Оценка посетителя                                 |
| comment     | text          | Комментарий посетителя                            |

***
***
#### 3. Алгоритмы
***
- Создание, удаление и редактирование точек (Owner)
***
![](https://github.com/Argoleed/service/blob/main/Owner.png)
***
- Создание и удаление отзывов (Visitor)
***
![](https://github.com/Argoleed/service/blob/main/Visitor.png)
***
***
#### 4. API
***
![](https://github.com/Argoleed/service/blob/main/API.png)
***
***
#### 5. Пользовательские сценарии работы
***
- Пользователь нажал на метку, тогда открывается интерфейс с информацией о заведении
- Пользователь написал отзыв, не выставив оценку (звёзды от 1 до 5), тогда выводится сообщение с просьбой поставить оценку, запрос на добавление отзыва в базу данных не отправляется
- Пользователь выставил оценку (при этом поле отзыва можно оставить пустым), тогда происходит отправление отзыва в БД и пересчёт рейтинга заведения
- Пользователь нажал на кнопку удаления своего отзыва, тогда из БД удаляется запись с отзывом, происходит пересчёт рейтинга заведения
- Владелец нажал на одну из своих меток, тогда открывается интерфейс с возможностью редактирования информации о заведении и её удаления
- Владелец нажал на пустое место на карте, открывается интерфейс с возможностью создания новой метки
***
